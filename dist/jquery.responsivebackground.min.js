/*!
 * Responsive Background Hero and Div v1.0.0
 * (c) 2018 Didou Schol
 * licensed under MIT
 */
!function(t,e,i){"use strict";function n(e,i){var n=/([a-zA-Z0-9_\-\.\:\/]{1,})\s(([0-9]{1,})w)/g;this.settings=t.extend({},s,i),this.settings.breakpoints.sort(this.sortFunction),this._defaults=s,this._element=t(e),this._regex=n,this.init()}var s={img:"img",ratio:1,breakpoints:[],fallbackbreakpoint:{},pause:!1},r="responsiveBackground";n.prototype={init:function(){var e=this,n=(this.settings,this.getBreakpoint());e.settings.currentBp=n,e.setResponsiveBackground(),t(i).resize(function(){if(e.settings.pause)return!1;var t=e.getBreakpoint();return(t!=e.settings.currentBp||!e.settings.breakpoints||!e.settings.breakpoints.length)&&(e.settings.currentBp=t,void e.setResponsiveBackground())})},getData:function(e,i){var n;n="img"==i&&t(e).find(i).first().length?t(e).find(i).first():"self"==i&&t(e).data("srcset").length?t(e):t(e).find(i).length?t(e).find(i):t(i);var s=this.matchDataProp(n);return s},matchDataProp:function(e){var i=t(e).data("srcset")?t(e).data("srcset"):t(e).prop("srcset"),n=t(e).data("src")?t(e).data("src"):t(e).prop("src");return{srcset:i,imagefull:n}},setResponsiveBackground:function(){var e=this,i=e.settings;return t(e._element).each(function(){var n,s,r=[],a=e.getData(this,i.img);return void 0!=a.srcset&&""!=a.srcset&&(i.breakpoints&&0==i.breakpoints.length&&(s=t(this).width()),r=e.arrangeSizes(a.srcset),t.each(r,function(t,e){if(i.breakpoints&&0==i.breakpoints.length){if(e[0]*i.ratio>s)return n=e[1],!1}else if(i.currentBp==-1||i.currentBp.imagesize==-1)n=void 0;else if(e[0]*i.ratio>=i.currentBp.imagesize)return n=e[1],!1}),void 0==n&&(n=a.imagefull),void t(this).css("backgroundImage","url( '"+n+"' )"))})},arrangeSizes:function(e){var i=this,n=[],s=[];return n=e.split(","),t(n).each(function(t){for(var e;null!==(e=i._regex.exec(this));)e.index==i._regex.lastIndex&&i._regex.lastIndex++,s.push([parseInt(e[3]),e[1]])}),s.sort(i.sortFunction),s},getBreakpoint:function(){var e,n=this.settings;return n.breakpoints&&n.breakpoints.length?(t.each(n.breakpoints,function(n,s){if(s.width>t(i).width())return e=s,!1}),null==e?n.fallbackbreakpoint:e):-1},sortFunction:function(t,e){return t[0]-e[0]},setRatio:function(t){this.settings.ratio=t},setElement:function(e){this.settings._element=t(e)},setImg:function(t){this.settings.img=t},redraw:function(){var t=this.getBreakpoint();this.settings.currentBp=t,this.setResponsiveBackground()},pause:function(){this.settings.pause=!0},start:function(){this.settings.pause=!1}},t.fn[r]=function(e){var i=arguments;if(void 0===e||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new n(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var s;return this.each(function(){var a=t.data(this,"plugin_"+r);a instanceof n&&"function"==typeof a[e]&&(s=a[e].apply(a,Array.prototype.slice.call(i,1)))}),void 0!==s?s:this}}}(jQuery,document,window);